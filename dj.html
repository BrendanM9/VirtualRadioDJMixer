<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title></title>
        <link rel="stylesheet" href="radio.css">
    </head>
    <body>
        <div id="mySidenav" class="sidenav">
            <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
            <a href="index.html">Home</a>
            <a href="dj.html">Virtual DJ</a>
            <a href="program.html">Program Creator</a>
            <a href="#">Recording Booth</a>
        </div>

        <!-- Use any element to open the sidenav -->
        <span onclick="openNav()"><div class="icon"></div><div class="icon"></div><div class="icon"></div></span>

        <!-- Add all page content inside this div if you want the side nav to push page content to the right (not used if you only want the sidenav to sit on top of the page -->
        <div id="main">
            <div id="deck1">
            <form id="choosetrack_1">
                <select id="1" name="1">
                    <option value="dangerzone">Danger Zone</option>
                    <option value="getaround">I Get Around</option>
                    <option value="billiejean">Billie Jean</option>
                </select>
                <!--<input type="submit">-->
            </form>
            <audio controls>
                <source src="music/06 Urgent.mp3">

            </audio>
            <button id="track_1">Start Track 1</button>
            </div>
            <div id="deck2">
            <form id="choosetrack_2">
                <select id="song2choose">
                    <option></option>
                    <option value="867">867-5309 Jenny</option>
                    <option value="nosun">Ain't No Sunshine</option>
                    <option value="modernlove">Modern Love</option>
                    <option value="howardjones">Things Can Only Get Better</option>
                </select>

            </form>
            <div id="turntable2"><audio controls><source src="music/10 Smooth Criminal.mp3"></audio></div>
            <button id="track_2">Start Track 2</button>
            </div>
            <button accesskey="1" id="b1" onclick="a1play()" type="button">Legal ID</button>
            <audio id="a1" class="soundboard"><source src="music/KQAK-FM_hour.mp3" type="audio/mpeg"></audio>
            <button accesskey="2" id="b2" onclick="a2play()" type="button">Weather Report</button>
            <audio id="a2" class="soundboard"><source src="music/KQAK-FM_weather.mp3" type="audio/mpeg"></audio>
            <button accesskey="3" id="b3">Contests</button>
            <button accesskey="4" id="b4">MyCentral Oregon .com Ad</button>
            <button accesskey="5" id="b5">What You Missed-DCE</button>
            <button accesskey="6" id="b6">PSA</button>
            <button accesskey="7" id="b7">KQAK Ticket Window</button>
            <button accesskey="8" id="b8" onclick="a8play()" type="button">KQAK Theme</button>
            <audio id="a8" class="soundboard"><source src="music/KQAK-FM_1.1.mp3" type="audio/mpeg"></audio>
            <button accesskey="9" id="b9">What's Trending</button>
            <button accesskey="0" id="b0">KQAK Ad Break</button>
            <label class="switch" id="mute1">
                <input type="checkbox" checked>
                <span class="slider round"></span>
              </label>
              <p id="mute1-t">Mute</p>
              <label class="switch" id="mute2">
                <input type="checkbox" checked>
                <span class="slider round"></span>
              </label>
              <p id="mute2-t">Mute</p>
              <label class="switch" id="mute3">
                <input type="checkbox" checked>
                <span class="slider round"></span>
              </label>
              <p id="mute3-t">Mute</p>
              <label class="switch" id="mute4">
                <input type="checkbox" checked>
                <span class="slider round"></span>
              </label>
              <p id="mute4-t">Mute</p>
              <label class="switch" id="mute5">
                <input type="checkbox" checked id="ab5" value=1>
                <span class="slider round"></span>
              </label>
              <p id="mute5-t">Mute</p>
              <!--<label class="switch" id="mute6">
                <input type="checkbox" checked>
                <span class="slider round"></span>
              </label>
              <p id="mute6-t">Mute</p>-->
              <script>
                var x5 = document.getElementById("ab5").value;
                var s5 = document.getElementById("ab5");
                var sound5 = document.getElementsByClassName("soundboard");
                var m1=document.getElementById("mute1");
                var m2=document.getElementById("mute2");
                var m3=document.getElementById("mute3");
                var m4=document.getElementById("mute4");
                var m5=document.getElementById("mute5");
                //var x4=$("#mute4").is(":checked");
                function getOffset(el) {
                    const rect = el.getBoundingClientRect();
                    return {
                        left: rect.left + window.scrollX,
                        top: rect.top + window.scrollY
                    };
                    console.log(top);
                } 
                var mute4v=function(){
                    if (x4===true){

                    }
                }  
                var mute5v=function(){
                    if (x5===1){
                        sound5.volume=0;
                    } else {
                        sound5.volume=1;
                    }
                }
                s5.addEventListener("click", mute5v());
              </script>
            <div id="fader1"></div>
            <div id="line1"></div>
            <div id="fader2"></div>
            <div id="line2"></div>
            <div id="fader3"></div>
            <div id="line3"></div>
            <div id="fader4"></div>
            <div id="line4"></div>
            <div id="fader5"></div>
            <div id="line5"></div>
            <div id="fader6"></div>
            <div id="line6"></div>
            <p id="fader1-t">Host Mic</p>
            <p id="fader2-t">Cohost Mic</p>
            <p id="fader3-t">Deck 1</p>
            <p id="fader4-t">Deck 2</p>
            <p id="fader5-t">Theme Sounders</p>
            <p id="fader6-t">Master</p>
            <button id="dump" onclick="onDumpClick()">Dump</button>
            <script>
                var dump = document.getElementById("dump");

                var onDumpClick=function(){
                    playTone(345,sine, 1);
                }
            </script>
            <script>
                var f3=document.getElementById("fader3")
                function getOffset(el) {
                    const rect = el.getBoundingClientRect();
                    return {
                        left: rect.left + window.scrollX,
                        top: rect.top + window.scrollY
                    };

                } 
                f3.addEventListener("click",getOffset(f3));
            </script>
        </div>
        <script>
        // Make the DIV element draggable:
            dragElement(document.getElementById("fader1"));
            dragElement(document.getElementById("fader2"));
            dragElement(document.getElementById("fader3"));
            dragElement(document.getElementById("fader4"));
            dragElement(document.getElementById("fader5"));
            dragElement(document.getElementById("fader6"))

            function dragElement(elmnt) {
                var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
                if (document.getElementById(elmnt.id + "header")) {
                    // if present, the header is where you move the DIV from:
                    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
                } else {
                    // otherwise, move the DIV from anywhere inside the DIV:
                    elmnt.onmousedown = dragMouseDown;
                }

                function dragMouseDown(e) {
                    e = e || window.event;
                    e.preventDefault();
                    // get the mouse cursor position at startup:
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    document.onmouseup = closeDragElement;
                    // call a function whenever the cursor moves:
                    document.onmousemove = elementDrag;
                }

                function elementDrag(e) {
                    e = e || window.event;
                    e.preventDefault();
                    // calculate the new cursor position:
                    pos1 = pos3 - e.clientX;
                    pos2 = pos4 - e.clientY;
                    pos3 = e.clientX;
                    pos4 = e.clientY;
                    // set the element's new position:
                    if(elmnt.offsetTop-pos2 <=500 && elmnt.offsetTop-pos2 >= 335){
                    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                    }
                    //elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
                }

                function closeDragElement() {
                    // stop moving when mouse button is released:
                    document.onmouseup = null;
                    document.onmousemove = null;
                }
                //fader1
                var getPosition=function(){
                console.log(elmnt.style.top)
                var vol1=(Math.abs((elmnt.style.top-670)/170));
                console.log(vol1)
                }
                f3.addEventListener("click", getPosition());
            }
        </script>
        <script>
            var a1 = document.getElementById("a1");

            function a1play(){
                a1.play();
            }
            var a2 = document.getElementById("a2");

            function a2play(){
                a2.play();
            }
            var a8 = document.getElementById("a8");
            
            function a8play(){
                a8.play();
            }
        </script>
        <script>
            var go = document.getElementById("2done");
            var song2 = document.getElementById("choosetrack_2");
            var song_2 = document.getElementById("track_2"); 
            var song2play;
            var deck2=document.getElementById("turntable2");
            var onGoClick = function(){
            if (song2="867"){
                song2play="867";
                document.getElementById("turntable2").innerHTML="<audio controls><source src='music/01 867-5309 _ Jenny.mp3' type='audio/mpeg'></audio>";
            } else if (song2="nosun"){
                song2play="nosun"
                document.getElementById("turntable2").innerHTML="<audio controls><source src='music/01 Ain't No Sunshine (Single Version).mp3'></audio>";
            } else if (song2="modernlove") {
                song2play="modernlove";
                document.getElementById("turntable2").innerHTML="<audio controls><source src='music/01 Modern Love.mp3'></audio>";
            } else if (song2="howardjones") {
                deck2.innerHTML="<audio controls><source src='music/01 Things Can Only Get Better (2018 Remaster).mp3'></audio>"
            }
        }
        //go.addEventListener("click", onGoClick());
        song_2.addEventListener("click", onGoClick());
            let audioIN = { audio: true };
            navigator.mediaDevices.getUserMedia(audioIN)
            .then(function (mediaStreamObj) {
                let audio = document.querySelector('audio');
                if ("srcObject" in audio) {
                    audio.srcObject = mediaStreamObj;
                }
                else {
                    audio.src = window.URL
                        .createObjectURL(mediaStreamObj)
                }
                audio.onloadedmetadata = function (ev) {
                    audio.play();
                }
                let start = document.getElementById('btnStart');
                let stop = document.getElementById('btnStop');
                let playAudio = document.getElementById('adioPlay')
                let mediaRecorder = new MediaRecorder(mediaStreamObj);
                start.addEventListener('click', function (ev) {
                    mediaRecorder.start();
                })
                stop.addEventListener('click', function (ev) {
                    mediaRecorder.start();
                });
                mediaRecorder.ondataavailable = function (ev) {
                    dataArray.push(ev.data)
                }
            })
        </script>
        <script>
        /* Set the width of the side navigation to 250px and the left margin of the page content to 250px and add a black background color to body */
            function openNav() {
                document.getElementById("mySidenav").style.width = "250px";
                document.getElementById("main").style.marginLeft = "250px";
                document.body.style.backgroundColor = "rgba(0,0,0,0.4)";
            }

        /* Set the width of the side navigation to 0 and the left margin of the page content to 0, and the background color of body to white */
            function closeNav() {
                document.getElementById("mySidenav").style.width = "0";
                document.getElementById("main").style.marginLeft = "0";
                document.body.style.backgroundColor = "white";
            }
        </script>
    </body>
</html>